{"remainingRequest":"/home/neo/Code/go/src/github.com/OctopusLian/skmall/web/node_modules/babel-loader/lib/index.js!/home/neo/Code/go/src/github.com/OctopusLian/skmall/web/node_modules/eslint-loader/index.js??ref--13-0!/home/neo/Code/go/src/github.com/OctopusLian/skmall/web/src/router.js","dependencies":[{"path":"/home/neo/Code/go/src/github.com/OctopusLian/skmall/web/src/router.js","mtime":1605763682000},{"path":"/home/neo/Code/go/src/github.com/OctopusLian/skmall/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/neo/Code/go/src/github.com/OctopusLian/skmall/web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/neo/Code/go/src/github.com/OctopusLian/skmall/web/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCB7IGNyZWF0ZVJvdXRlciwgY3JlYXRlV2ViSGlzdG9yeSB9IGZyb20gInZ1ZS1yb3V0ZXIiOwppbXBvcnQgR29vZHNMaXN0IGZyb20gJ0Avdmlld3MvZnJvbnQvR29vZHNMaXN0JzsKaW1wb3J0IEdvb2RzRGV0YWlsIGZyb20gIkAvdmlld3MvZnJvbnQvR29vZHNEZXRhaWwiOwp2YXIgd2ViSGlzdG9yeSA9IGNyZWF0ZVdlYkhpc3RvcnkoKTsKdmFyIHJvdXRlciA9IGNyZWF0ZVJvdXRlcih7CiAgaGlzdG9yeTogd2ViSGlzdG9yeSwKICByb3V0ZXM6IFsvLyBmcm9udOW8gOWniwogIHsKICAgIHBhdGg6ICcvJywKICAgIG5hbWU6ICdHb29kc0xpc3QnLAogICAgY29tcG9uZW50OiBHb29kc0xpc3QKICB9LCB7CiAgICBwYXRoOiAiL2RldGFpbC86aWQiLAogICAgbmFtZTogIkdvb2RzRGV0YWlsIiwKICAgIGNvbXBvbmVudDogR29vZHNEZXRhaWwKICB9LCB7CiAgICBwYXRoOiAiL2xvZ2luIiwKICAgIG5hbWU6ICJMb2dpbiIsCiAgICBjb21wb25lbnQ6IGZ1bmN0aW9uIGNvbXBvbmVudCgpIHsKICAgICAgcmV0dXJuIGltcG9ydCgnLi92aWV3cy9mcm9udC9Mb2dpbicpOwogICAgfQogIH0sIHsKICAgIHBhdGg6ICIvcmVnaXN0ZXIiLAogICAgbmFtZTogIlJlZ2lzdGVyIiwKICAgIGNvbXBvbmVudDogZnVuY3Rpb24gY29tcG9uZW50KCkgewogICAgICByZXR1cm4gaW1wb3J0KCcuL3ZpZXdzL2Zyb250L1JlZ2lzdGVyJyk7CiAgICB9CiAgfSwgLy8gZnJvbnTnu5PmnZ8KICAvLyBjbXPlvIDlp4sKICB7CiAgICBwYXRoOiAnL2FkbWluJywKICAgIG5hbWU6ICdBZG1pbicsCiAgICBjb21wb25lbnQ6IGZ1bmN0aW9uIGNvbXBvbmVudCgpIHsKICAgICAgcmV0dXJuIGltcG9ydCgnLi92aWV3cy9jbXMvdXNlci9Mb2dpbicpOwogICAgfQogIH0sIHsKICAgIHBhdGg6ICIvbWFpbiIsCiAgICByZWRpcmVjdDogIi9tYWluL3VzZXJfbGlzdCIKICB9LCB7CiAgICBwYXRoOiAiL21haW4iLAogICAgbmFtZTogIk1haW4iLAogICAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICAgIHJldHVybiBpbXBvcnQoJy4vdmlld3MvTWFpbicpOwogICAgfSwKICAgIC8vIHJlZGlyZWN0OiIvbWFpbi91c2VyX2xpc3QiLAogICAgY2hpbGRyZW46IFt7CiAgICAgIHBhdGg6ICJ1c2VyX2xpc3QiLAogICAgICBuYW1lOiAiVXNlckxpc3QiLAogICAgICBjb21wb25lbnQ6IGZ1bmN0aW9uIGNvbXBvbmVudCgpIHsKICAgICAgICByZXR1cm4gaW1wb3J0KCcuL3ZpZXdzL2Ntcy91c2VyL1VzZXJMaXN0Jyk7CiAgICAgIH0KICAgIH0sIHsKICAgICAgcGF0aDogInByb2R1Y3RfbGlzdCIsCiAgICAgIG5hbWU6ICJQcm9kdWN0TGlzdCIsCiAgICAgIGNvbXBvbmVudDogZnVuY3Rpb24gY29tcG9uZW50KCkgewogICAgICAgIHJldHVybiBpbXBvcnQoJy4vdmlld3MvY21zL3Byb2R1Y3QvUHJvZHVjdExpc3QnKTsKICAgICAgfQogICAgfSwgewogICAgICBwYXRoOiAicHJvZHVjdF9hZGQiLAogICAgICBuYW1lOiAiUHJvZHVjdEFkZCIsCiAgICAgIGNvbXBvbmVudDogZnVuY3Rpb24gY29tcG9uZW50KCkgewogICAgICAgIHJldHVybiBpbXBvcnQoJy4vdmlld3MvY21zL3Byb2R1Y3QvUHJvZHVjdEFkZCcpOwogICAgICB9CiAgICB9LCB7CiAgICAgIHBhdGg6ICJwcm9kdWN0X2VkaXQvOmlkIiwKICAgICAgbmFtZTogIlByb2R1Y3RFZGl0IiwKICAgICAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICAgICAgcmV0dXJuIGltcG9ydCgnLi92aWV3cy9jbXMvcHJvZHVjdC9Qcm9kdWN0RWRpdCcpOwogICAgICB9CiAgICB9LCB7CiAgICAgIHBhdGg6ICJzZWNraWxsX2xpc3QiLAogICAgICBuYW1lOiAiU2Vja2lsbHJMaXN0IiwKICAgICAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICAgICAgcmV0dXJuIGltcG9ydCgnLi92aWV3cy9jbXMvc2Vja2lsbC9TZWNraWxsTGlzdCcpOwogICAgICB9CiAgICB9LCB7CiAgICAgIHBhdGg6ICJzZWNraWxsX2FkZCIsCiAgICAgIG5hbWU6ICJTZWNraWxsckFkZCIsCiAgICAgIGNvbXBvbmVudDogZnVuY3Rpb24gY29tcG9uZW50KCkgewogICAgICAgIHJldHVybiBpbXBvcnQoJy4vdmlld3MvY21zL3NlY2tpbGwvU2Vja2lsbEFkZCcpOwogICAgICB9CiAgICB9LCB7CiAgICAgIHBhdGg6ICJzZWNraWxsX2VkaXQvOmlkIiwKICAgICAgbmFtZTogIlNlY2tpbGxyRWRpdCIsCiAgICAgIGNvbXBvbmVudDogZnVuY3Rpb24gY29tcG9uZW50KCkgewogICAgICAgIHJldHVybiBpbXBvcnQoJy4vdmlld3MvY21zL3NlY2tpbGwvU2Vja2lsbEVkaXQnKTsKICAgICAgfQogICAgfV0KICB9XQp9KTsKcm91dGVyLmJlZm9yZUVhY2goZnVuY3Rpb24gKHRvLCBmcm9tLCBuZXh0KSB7CiAgLy8gdG8g5ruh6Laz5p2h5Lu255qEdXJs5pS+6L+HCiAgaWYgKHRvLnBhdGggPT0gIi8iIHx8IHRvLnBhdGggPT0gIi9sb2dpbiIgfHwgdG8ucGF0aCA9PSAiL3JlZ2lzdGVyIiB8fCB0by5wYXRoID09ICIvYWRtaW4iKSB7CiAgICBuZXh0KCk7IC8vIOebtOaOpeaUvui/hwogIH0gZWxzZSB7CiAgICAvLyBhbGVydCh0by5wYXRoKSAvLyAvbWFpbi91c2VyX2xpc3QKICAgIHZhciByZWcgPSAvXC9tYWluXC9bYS16QS16XStbXy1dPy87IC8vIOWBmnRva2Vu5qCh6aqMCgogICAgaWYgKHJlZy50ZXN0KHRvLnBhdGgpKSB7CiAgICAgIC8vIOagoemqjOeuoeeQhuWRmO+8jOS4jeWPl+eUqOaIt+W9seWTjQogICAgICB2YXIgYWRtaW5fdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYWRtaW5fdG9rZW4iKTsgLy8gYWxlcnQoIuWIsG1haW7nmoR1cmwiKQoKICAgICAgaWYgKGFkbWluX3Rva2VuID09ICIiIHx8IGFkbWluX3Rva2VuID09IG51bGwgfHwgYWRtaW5fdG9rZW4gPT0gJycpIHsKICAgICAgICBuZXh0KCIvYWRtaW4iKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBuZXh0KCk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIC8vIOagoemqjOeUqOaIt+eahO+8jOS4jeWPl+euoeeQhuWRmOW9seWTjQogICAgICB2YXIgZnJvbnRfdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiZnJvbnRfdG9rZW4iKTsgLy8gZnJvbnTnmoTpnIDopoHmnYPpmZDnmoR1cmwKCiAgICAgIGlmIChmcm9udF90b2tlbiA9PSAiIiB8fCBmcm9udF90b2tlbiA9PSBudWxsIHx8IGZyb250X3Rva2VuID09ICcnKSB7CiAgICAgICAgbmV4dCgiL2xvZ2luIik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbmV4dCgpOwogICAgICB9CiAgICB9CiAgfQp9KTsKZXhwb3J0IGRlZmF1bHQgcm91dGVyOw=="},{"version":3,"sources":["/home/neo/Code/go/src/github.com/OctopusLian/skmall/web/src/router.js"],"names":["createRouter","createWebHistory","GoodsList","GoodsDetail","webHistory","router","history","routes","path","name","component","redirect","children","beforeEach","to","from","next","reg","test","admin_token","localStorage","getItem","front_token"],"mappings":"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","sourcesContent":["import {createRouter,createWebHistory} from \"vue-router\"\r\nimport GoodsList from '@/views/front/GoodsList'\r\nimport GoodsDetail from \"@/views/front/GoodsDetail\";\r\n\r\nconst webHistory = createWebHistory()\r\n\r\n\r\nconst router = createRouter({\r\n    history:webHistory,\r\n    routes:[\r\n        // front开始\r\n        {\r\n            path: '/',\r\n            name: 'GoodsList',\r\n            component: GoodsList\r\n        },\r\n\r\n        {\r\n            path: \"/detail/:id\",\r\n            name: \"GoodsDetail\",\r\n            component: GoodsDetail\r\n        },\r\n\r\n        {\r\n            path:\"/login\",\r\n            name:\"Login\",\r\n            component:() => import('./views/front/Login')\r\n        },\r\n\r\n        {\r\n            path:\"/register\",\r\n            name:\"Register\",\r\n            component:() => import('./views/front/Register')\r\n        },\r\n\r\n        // front结束\r\n\r\n        // cms开始\r\n\r\n        {\r\n            path: '/admin',\r\n            name: 'Admin',\r\n            component:() => import('./views/cms/user/Login')\r\n        },\r\n\r\n\r\n        \r\n        {\r\n            path:\"/main\",\r\n            redirect:\"/main/user_list\",\r\n        },\r\n\r\n\r\n        {\r\n            path:\"/main\",\r\n            name:\"Main\",\r\n            component:() => import('./views/Main'),\r\n            // redirect:\"/main/user_list\",\r\n            children:[\r\n                {\r\n                    path:\"user_list\",\r\n                    name:\"UserList\",\r\n                    component:() => import('./views/cms/user/UserList')\r\n                },\r\n\r\n                {\r\n                    path:\"product_list\",\r\n                    name:\"ProductList\",\r\n                    component:() => import('./views/cms/product/ProductList')\r\n                },\r\n\r\n                {\r\n                    path:\"product_add\",\r\n                    name:\"ProductAdd\",\r\n                    component:() => import('./views/cms/product/ProductAdd')\r\n                },\r\n\r\n                {\r\n                    path:\"product_edit/:id\",\r\n                    name:\"ProductEdit\",\r\n                    component:() => import('./views/cms/product/ProductEdit')\r\n                },\r\n\r\n                {\r\n                    path:\"seckill_list\",\r\n                    name:\"SeckillrList\",\r\n                    component:() => import('./views/cms/seckill/SeckillList')\r\n                },\r\n                {\r\n                    path:\"seckill_add\",\r\n                    name:\"SeckillrAdd\",\r\n                    component:() => import('./views/cms/seckill/SeckillAdd')\r\n                },\r\n                {\r\n                    path:\"seckill_edit/:id\",\r\n                    name:\"SeckillrEdit\",\r\n                    component:() => import('./views/cms/seckill/SeckillEdit')\r\n                },\r\n            ]\r\n        },   \r\n        \r\n\r\n    ]\r\n})\r\n\r\n\r\n\r\nrouter.beforeEach((to,from,next) => {\r\n    // to 满足条件的url放过\r\n    if (to.path == \"/\" || to.path == \"/login\" || to.path == \"/register\" || to.path == \"/admin\"){\r\n        next()  // 直接放过\r\n    }else {\r\n\r\n\r\n        // alert(to.path) // /main/user_list\r\n\r\n        const reg = /\\/main\\/[a-zA-z]+[_-]?/\r\n        // 做token校验\r\n        if (reg.test(to.path)) {\r\n            // 校验管理员，不受用户影响\r\n            const admin_token = localStorage.getItem(\"admin_token\")\r\n            // alert(\"到main的url\")\r\n            if (admin_token == \"\" || admin_token == null || admin_token == '') {\r\n                next(\"/admin\")\r\n            }else {\r\n                next()\r\n            }\r\n        }else {\r\n            // 校验用户的，不受管理员影响\r\n            const front_token = localStorage.getItem(\"front_token\")\r\n             // front的需要权限的url\r\n             if (front_token == \"\" || front_token == null || front_token == '') {\r\n                next(\"/login\")\r\n            }else {\r\n                next()\r\n            }\r\n        }\r\n\r\n        \r\n    }\r\n})\r\n\r\n\r\nexport default router"]}]}