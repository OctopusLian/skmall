{"remainingRequest":"/home/neo/Code/go/src/github.com/OctopusLian/skmall/web/node_modules/babel-loader/lib/index.js!/home/neo/Code/go/src/github.com/OctopusLian/skmall/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/neo/Code/go/src/github.com/OctopusLian/skmall/web/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/neo/Code/go/src/github.com/OctopusLian/skmall/web/src/views/cms/product/ProductEdit.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/neo/Code/go/src/github.com/OctopusLian/skmall/web/src/views/cms/product/ProductEdit.vue","mtime":1605757402000},{"path":"/home/neo/Code/go/src/github.com/OctopusLian/skmall/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/neo/Code/go/src/github.com/OctopusLian/skmall/web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/neo/Code/go/src/github.com/OctopusLian/skmall/web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/neo/Code/go/src/github.com/OctopusLian/skmall/web/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGFiZWxDb2w6IHsKICAgICAgICBzcGFuOiA0CiAgICAgIH0sCiAgICAgIHdyYXBwZXJDb2w6IHsKICAgICAgICBzcGFuOiAxNAogICAgICB9LAogICAgICBmb3JtOiB7CiAgICAgICAgaWQ6IHVuZGVmaW5lZCwKICAgICAgICBuYW1lOiAnJywKICAgICAgICBwcmljZTogdW5kZWZpbmVkLAogICAgICAgIG51bTogdW5kZWZpbmVkLAogICAgICAgIHVuaXQ6ICcnLAogICAgICAgIGRlc2M6ICcnLAogICAgICAgIHBpYzogIiIKICAgICAgfQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldF9wcm9kdWN0X2J5X2lkKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRfcHJvZHVjdF9ieV9pZDogZnVuY3Rpb24gZ2V0X3Byb2R1Y3RfYnlfaWQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLiRheGlvcy5nZXQoIi9wcm9kdWN0L3RvX3Byb2R1Y3RfZWRpdCIsIHsKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIGlkOiB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQKICAgICAgICB9LAogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIiArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJhZG1pbl90b2tlbiIpCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXApIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXApOwoKICAgICAgICBpZiAocmVwLmRhdGEuY29kZSA9PSAyMDApIHsKICAgICAgICAgIF90aGlzLmZvcm0uaWQgPSByZXAuZGF0YS5wcm9kdWN0LmlkOwogICAgICAgICAgX3RoaXMuZm9ybS5uYW1lID0gcmVwLmRhdGEucHJvZHVjdC5uYW1lOwogICAgICAgICAgX3RoaXMuZm9ybS5wcmljZSA9IHJlcC5kYXRhLnByb2R1Y3QucHJpY2U7CiAgICAgICAgICBfdGhpcy5mb3JtLm51bSA9IHJlcC5kYXRhLnByb2R1Y3QubnVtOwogICAgICAgICAgX3RoaXMuZm9ybS51bml0ID0gcmVwLmRhdGEucHJvZHVjdC51bml0OwogICAgICAgICAgX3RoaXMuZm9ybS5kZXNjID0gcmVwLmRhdGEucHJvZHVjdC5kZXNjOwogICAgICAgICAgX3RoaXMuZm9ybS5waWMgPSByZXAuZGF0YS5pbWdfYmFzZTY0OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhbGVydCgi6K+35Lyg5q2j56Gu55qE5ZWG5ZOBaWQiKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZXApIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXApOwogICAgICB9KTsKICAgIH0sCiAgICBCYWNrTGlzdDogZnVuY3Rpb24gQmFja0xpc3QoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvbWFpbi9wcm9kdWN0X2xpc3QiKTsKICAgIH0sCiAgICBEb0VkaXQ6IGZ1bmN0aW9uIERvRWRpdCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgZm9ybV9kYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGZvcm1fZGF0YS5hcHBlbmQoImlkIiwgdGhpcy5mb3JtLmlkKTsKICAgICAgZm9ybV9kYXRhLmFwcGVuZCgibmFtZSIsIHRoaXMuZm9ybS5uYW1lKTsKICAgICAgZm9ybV9kYXRhLmFwcGVuZCgicHJpY2UiLCB0aGlzLmZvcm0ucHJpY2UpOwogICAgICBmb3JtX2RhdGEuYXBwZW5kKCJudW0iLCB0aGlzLmZvcm0ubnVtKTsKICAgICAgZm9ybV9kYXRhLmFwcGVuZCgidW5pdCIsIHRoaXMuZm9ybS51bml0KTsKICAgICAgZm9ybV9kYXRhLmFwcGVuZCgicGljIiwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1maWxlXScpLmZpbGVzWzBdKTsKICAgICAgZm9ybV9kYXRhLmFwcGVuZCgiZGVzYyIsIHRoaXMuZm9ybS5kZXNjKTsKICAgICAgdGhpcy4kYXhpb3MucG9zdCgiL3Byb2R1Y3QvZG9fcHJvZHVjdF9lZGl0IiwgZm9ybV9kYXRhLCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiICsgbG9jYWxTdG9yYWdlLmdldEl0ZW0oImFkbWluX3Rva2VuIikKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcCkgewogICAgICAgIGNvbnNvbGUubG9nKHJlcCk7CgogICAgICAgIGlmIChyZXAuZGF0YS5jb2RlID09IDIwMCkgewogICAgICAgICAgYWxlcnQocmVwLmRhdGEubXNnKTsKCiAgICAgICAgICBfdGhpczIuJHJvdXRlci5wdXNoKCIvbWFpbi9wcm9kdWN0X2xpc3QiKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYWxlcnQocmVwLmRhdGEubXNnKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZXApIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXApOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/home/neo/Code/go/src/github.com/OctopusLian/skmall/web/src/views/cms/product/ProductEdit.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <a-form :model=\"form\" :label-col=\"labelCol\" :wrapper-col=\"wrapperCol\">\r\n\r\n    <a-form-item label=\"商品名称\">\r\n      <a-input v-model:value=\"form.name\" placeholder=\"请输入商品名称\" />\r\n    </a-form-item>\r\n\r\n    <a-form-item label=\"商品价格\">\r\n      <a-input v-model:value=\"form.price\" placeholder=\"请输入商品价格，保留两位小数\"/>\r\n    </a-form-item>\r\n\r\n    <a-form-item label=\"商品库存\">\r\n      <a-input v-model:value=\"form.num\" placeholder=\"请输入商品库存\"/>\r\n    </a-form-item>\r\n\r\n    <a-form-item label=\"商品单位\">\r\n      <a-input v-model:value=\"form.unit\" placeholder=\"请输入商品单位\"/>\r\n    </a-form-item>\r\n\r\n    <a-form-item label=\"商品原图\">\r\n      <img :src=\"'data:image/jpeg;base64,'+ form.pic\" alt=\"\" style=\"width:300px;height:200px\">\r\n    </a-form-item>\r\n\r\n    <a-form-item label=\"商品新图\">\r\n      <a-input type=\"file\"/>\r\n    </a-form-item>\r\n\r\n\r\n    <a-form-item label=\"商品描述\">\r\n      <a-input v-model:value=\"form.desc\" placeholder=\"请输入商品描述\"/>\r\n    </a-form-item>\r\n\r\n    \r\n    <a-form-item :wrapper-col=\"{ span: 14, offset: 4 }\">\r\n      <a-button type=\"primary\" @click=\"DoEdit\">\r\n        提交\r\n      </a-button>\r\n      <a-button style=\"margin-left: 10px;\" @click=\"BackList\">\r\n        返回\r\n      </a-button>\r\n    </a-form-item>\r\n  </a-form>\r\n</template>\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      labelCol: { span: 4 },\r\n      wrapperCol: { span: 14 },\r\n      form: {\r\n        id:undefined,\r\n        name: '',\r\n        price: undefined,\r\n        num: undefined,\r\n        unit: '',\r\n        desc: '',\r\n        pic:\"\",\r\n      },\r\n    };\r\n  },\r\n  created(){\r\n    this.get_product_by_id()\r\n\r\n  },\r\n  methods: {\r\n\r\n    get_product_by_id(){\r\n      this.$axios.get(\"/product/to_product_edit\",{\r\n        params:{\r\n          id:this.$route.params.id\r\n        },\r\n        \r\n        headers:{\r\n          Authorization:\"Bearer \" + localStorage.getItem(\"admin_token\")\r\n        }\r\n      \r\n      }).then((rep) => {\r\n\r\n        console.log(rep);\r\n\r\n        if (rep.data.code == 200){\r\n          this.form.id = rep.data.product.id\r\n          this.form.name = rep.data.product.name\r\n          this.form.price = rep.data.product.price\r\n          this.form.num = rep.data.product.num\r\n          this.form.unit = rep.data.product.unit\r\n          this.form.desc = rep.data.product.desc\r\n          this.form.pic = rep.data.img_base64\r\n        }else {\r\n          alert(\"请传正确的商品id\")\r\n        }\r\n\r\n        \r\n\r\n\r\n      }).catch((rep) => {\r\n        console.log(rep);\r\n      })\r\n    },\r\n\r\n      BackList(){\r\n          this.$router.push(\"/main/product_list\")\r\n\r\n      },\r\n    DoEdit() {\r\n\r\n        const form_data = new FormData();\r\n        form_data.append(\"id\",this.form.id)\r\n        form_data.append(\"name\",this.form.name)\r\n        form_data.append(\"price\",this.form.price)\r\n        form_data.append(\"num\",this.form.num)\r\n        form_data.append(\"unit\",this.form.unit)\r\n        form_data.append(\"pic\",document.querySelector('input[type=file]').files[0])\r\n        form_data.append(\"desc\",this.form.desc)\r\n\r\n        this.$axios.post(\"/product/do_product_edit\",form_data,{\r\n          headers:{\r\n                Authorization:\"Bearer \" + localStorage.getItem(\"admin_token\")\r\n              }\r\n        }).then((rep) => {\r\n            console.log(rep);\r\n            if (rep.data.code == 200){\r\n                alert(rep.data.msg)\r\n                this.$router.push(\"/main/product_list\")\r\n            }else {\r\n                alert(rep.data.msg)\r\n            }\r\n\r\n        }).catch((rep) => {\r\n            console.log(rep);\r\n\r\n        })\r\n    },\r\n  },\r\n};\r\n</script>\r\n"],"sourceRoot":""}]}